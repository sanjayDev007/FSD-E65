<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Fun API Adventure for Kids!</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #ff6b6b;
            text-align: center;
            font-size: 36px;
        }
        h2 {
            color: #4d96ff;
            border-bottom: 3px dotted #4d96ff;
            padding-bottom: 5px;
        }
        .section {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .visual-box {
            background-color: #fff9db;
            border: 3px solid #ffd43b;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-size: 18px;
        }
        .emoji {
            font-size: 40px;
            margin: 10px;
        }
        .flex-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .card {
            width: 180px;
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 2px;
            cursor: pointer;
            border-radius: 8px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }
        #pizza-result {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
            display: none;
        }
        .comic-strip {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .comic-panel {
            width: 30%;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 10px;
            background-color: #fff;
            text-align: center;
        }
        .flowchart {
            margin: 20px 0;
        }
        .flowchart-step {
            background-color: #d8f3dc;
            border: 2px solid #95d5b2;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            position: relative;
        }
        .flowchart-step::after {
            content: "‚Üì";
            display: block;
            font-size: 24px;
            margin: 5px 0;
        }
        .flowchart-step:last-child::after {
            content: "";
        }
        .http-methods-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 16px;
        }
        .http-methods-table th, .http-methods-table td {
            border: 1px solid #4d96ff;
            padding: 8px 12px;
            text-align: center;
        }
        .http-methods-table th {
            background-color: #e6f7ff;
        }
        .http-method-get { color: #388e3c; font-weight: bold; }
        .http-method-post { color: #1976d2; font-weight: bold; }
        .http-method-put { color: #fbc02d; font-weight: bold; }
        .http-method-patch { color: #8e24aa; font-weight: bold; }
        .http-method-delete { color: #d32f2f; font-weight: bold; }
        .code-block {
            background: #222;
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Fira Mono', 'Consolas', monospace;
            margin: 10px 0;
            font-size: 15px;
            overflow-x: auto;
        }
        .flowchart-trycatch {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin: 20px 0;
        }
        .flowchart-trycatch-step {
            background: #e3f2fd;
            border: 2px solid #90caf9;
            border-radius: 10px;
            padding: 10px 18px;
            text-align: center;
            min-width: 120px;
            position: relative;
        }
        .flowchart-trycatch-arrow {
            font-size: 32px;
            align-self: center;
        }
        .error-highlight {
            color: #d32f2f;
            font-weight: bold;
        }
        .success-highlight {
            color: #388e3c;
            font-weight: bold;
        }
        .info-highlight {
            color: #1976d2;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üöÄ The Ultimate API & Fetch Guide  üöÄ</h1>

    <div class="section">
        <h2>What is an API? ü§ñ</h2>
        <div class="visual-box">
            <span class="emoji">üßë‚Äçüíª</span> <b>‚Üí</b> <span class="emoji">üåê</span> <b>‚Üí</b> <span class="emoji">üóÑÔ∏è</span>
            <p><strong>API = The messenger between your code and the outside world!</strong></p>
        </div>
        <p>
            Imagine you want to get the latest news, post a photo, or update your profile on a website. You don't talk directly to the database or server. Instead, you send your request to an <b>API</b> (Application Programming Interface). The API takes your request, talks to the server, and brings back the answer.
        </p>
        <ul>
            <li><b>APIs are everywhere:</b> Social media, games, weather apps, online shopping, and more.</li>
            <li><b>APIs have rules:</b> You must ask in a specific way (using HTTP methods and JSON data).</li>
        </ul>
        <div class="visual-box">
            <span class="emoji">üì¨</span> <b>API is like a mailbox:</b> You put in a letter (request), and later you get a reply (response).
        </div>
    </div>

    <div class="section">
        <h2>HTTP Methods: GET, POST, PUT, PATCH, DELETE</h2>
        <p>
            APIs use different <b>HTTP methods</b> to tell the server what you want to do. Here's a breakdown:
        </p>
        <table class="http-methods-table">
            <tr>
                <th>Method</th>
                <th>Purpose</th>
                <th>Has Body?</th>
                <th>Typical Use</th>
                <th>Idempotent?</th>
            </tr>
            <tr>
                <td class="http-method-get">GET</td>
                <td>Retrieve data</td>
                <td>No</td>
                <td>Get a list of users, fetch a post</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td class="http-method-post">POST</td>
                <td>Create new data</td>
                <td>Yes</td>
                <td>Add a new comment, register a user</td>
                <td>No</td>
            </tr>
            <tr>
                <td class="http-method-put">PUT</td>
                <td>Replace existing data</td>
                <td>Yes</td>
                <td>Update a whole profile</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td class="http-method-patch">PATCH</td>
                <td>Update part of data</td>
                <td>Yes</td>
                <td>Change just the email address</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td class="http-method-delete">DELETE</td>
                <td>Remove data</td>
                <td>Usually No</td>
                <td>Delete a post</td>
                <td>Yes</td>
            </tr>
        </table>
        <ul>
            <li><b>GET</b>: Only asks for data. <span class="info-highlight">No body allowed.</span></li>
            <li><b>POST</b>: Sends new data. <span class="success-highlight">Body required (usually JSON).</span></li>
            <li><b>PUT</b>: Replaces all data at a resource. <span class="success-highlight">Body required.</span></li>
            <li><b>PATCH</b>: Updates part of a resource. <span class="success-highlight">Body required.</span></li>
            <li><b>DELETE</b>: Removes data. <span class="info-highlight">Body is rare and not recommended.</span></li>
        </ul>
        <div class="visual-box">
            <span class="emoji">üîÑ</span> <b>Idempotent?</b> Means if you repeat the request, the result is the same (GET, PUT, PATCH, DELETE are idempotent; POST is not).
        </div>
    </div>

    <div class="section">
        <h2>How does fetch() work? üì¨</h2>
        <p>
            <b>fetch()</b> is a JavaScript function to make API requests. It returns a <b>Promise</b> (a future result).
        </p>
        <div class="flowchart">
            <div class="flowchart-step">
                <span class="emoji">üßë‚Äçüíª</span>
                <p>Write fetch() code</p>
            </div>
            <div class="flowchart-step">
                <span class="emoji">üì§</span>
                <p>Request sent to API</p>
            </div>
            <div class="flowchart-step">
                <span class="emoji">‚è≥</span>
                <p>Wait for response (Promise)</p>
            </div>
            <div class="flowchart-step">
                <span class="emoji">üì¨</span>
                <p>Response received</p>
            </div>
            <div class="flowchart-step">
                <span class="emoji">‚úÖ</span>
                <p>then(): Handle success</p>
            </div>
            <div class="flowchart-step">
                <span class="emoji">‚ùå</span>
                <p>catch(): Handle errors</p>
            </div>
        </div>
        <div class="code-block">
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => {
    // Success! Use the data
  })
  .catch(error => {
    // Something went wrong
  });
        </div>
    </div>

    <div class="section">
        <h2>catch() in Real Life: When Do Errors Happen?</h2>
        <ul>
            <li><b>Network error:</b> No internet, server is down, or DNS fails.</li>
            <li><b>API returns error status:</b> 404 (not found), 500 (server error), 401 (unauthorized), etc.</li>
            <li><b>Invalid JSON:</b> The response is not valid JSON, so <code>response.json()</code> fails.</li>
            <li><b>Manual error:</b> You can throw your own error if the API returns a bad status.</li>
        </ul>
        <div class="code-block">
fetch('https://api.example.com/user/123')
  .then(response => {
    if (!response.ok) {
      throw new Error('User not found!');
    }
    return response.json();
  })
  .then(data => {
    // Use the user data
  })
  .catch(error => {
    // This runs if:
    // - Network fails
    // - API returns error status (because we threw)
    // - JSON parsing fails
    // - Or if you throw inside then()
  });
        </div>
        <div class="visual-box">
            <span class="emoji">‚ö†Ô∏è</span> <b>Real world:</b> If you throw an error inside <b>catch()</b>, it won't be caught by another catch chained to the same fetch. You'd need another .catch() or use try/catch with async/await.
        </div>
    </div>

    <div class="section">
        <h2>Can fetch() be used like try/catch?</h2>
        <p>
            <b>fetch()</b> uses Promises, so you handle errors with <b>.catch()</b>. But with <b>async/await</b>, you can use <b>try/catch</b> for a more "synchronous" style:
        </p>
        <div class="code-block">
async function getUser() {
  try {
    const response = await fetch('https://api.example.com/user/123');
    if (!response.ok) {
      throw new Error('User not found!');
    }
    const data = await response.json();
    // Success! Use data
  } catch (error) {
    // Handle any error (network, status, parsing, thrown)
  }
}
        </div>
        <div class="flowchart-trycatch">
            <div class="flowchart-trycatch-step">try {<br>await fetch()<br>}</div>
            <div class="flowchart-trycatch-arrow">‚û°Ô∏è</div>
            <div class="flowchart-trycatch-step success-highlight">If all good:<br>Continue code</div>
            <div class="flowchart-trycatch-arrow">‚¨áÔ∏è</div>
            <div class="flowchart-trycatch-step error-highlight">If error:<br>catch block runs</div>
        </div>
        <ul>
            <li><b>try/catch</b> is used to handle errors in <b>async/await</b> code, making it easier to read and debug.</li>
            <li>Any error thrown inside <b>try</b> (including from <b>fetch</b>, <b>response.json()</b>, or your own <b>throw</b>) will be caught in <b>catch</b>.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Why use try/catch?</h2>
        <ul>
            <li>To prevent your app from crashing when something unexpected happens.</li>
            <li>To show friendly error messages to users.</li>
            <li>To handle different types of errors in different ways.</li>
            <li>To keep your code organized and readable.</li>
        </ul>
        <div class="visual-box">
            <span class="emoji">üõ°Ô∏è</span> <b>try/catch is like a safety net for your code!</b>
        </div>
    </div>

    <div class="section">
        <h2>API Methods in Practice: Visual Examples</h2>
        <div class="flex-container">
            <div class="card">
                <h3 class="http-method-get">GET</h3>
                <p>fetch('/api/posts')</p>
                <p>Get all posts</p>
            </div>
            <div class="card">
                <h3 class="http-method-post">POST</h3>
                <p>fetch('/api/posts', {<br>&nbsp;&nbsp;method: 'POST',<br>&nbsp;&nbsp;body: JSON.stringify({...})<br>})</p>
                <p>Create a new post</p>
            </div>
            <div class="card">
                <h3 class="http-method-put">PUT</h3>
                <p>fetch('/api/posts/1', {<br>&nbsp;&nbsp;method: 'PUT',<br>&nbsp;&nbsp;body: JSON.stringify({...})<br>})</p>
                <p>Replace post #1</p>
            </div>
            <div class="card">
                <h3 class="http-method-patch">PATCH</h3>
                <p>fetch('/api/posts/1', {<br>&nbsp;&nbsp;method: 'PATCH',<br>&nbsp;&nbsp;body: JSON.stringify({...})<br>})</p>
                <p>Update part of post #1</p>
            </div>
            <div class="card">
                <h3 class="http-method-delete">DELETE</h3>
                <p>fetch('/api/posts/1', {<br>&nbsp;&nbsp;method: 'DELETE'<br>})</p>
                <p>Delete post #1</p>
            </div>
        </div>
        <ul>
            <li><b>GET</b>: No body, just the URL.</li>
            <li><b>POST, PUT, PATCH</b>: Send a body (usually JSON) with your data.</li>
            <li><b>DELETE</b>: Usually no body, just the URL of what to delete.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Summary: API & Error Handling Workflow</h2>
        <ol>
            <li>Decide what you want to do (get, create, update, delete).</li>
            <li>Pick the right HTTP method.</li>
            <li>Write your fetch() or async/await code.</li>
            <li>Handle the response in <b>then()</b> or after <b>await</b>.</li>
            <li>Handle errors in <b>catch()</b> or <b>catch block</b>.</li>
            <li>Show results or errors to the user.</li>
        </ol>
        <div class="visual-box">
            <span class="emoji">üßë‚Äçüíª</span> <b>APIs let you build powerful, interactive apps. Mastering fetch, HTTP methods, and error handling is key for every developer!</b>
        </div>
    </div>

    <div class="section">
        <h2>Let's try it! üçï</h2>
        <p>Click the button to order a pizza using an API:</p>
        <button id="order-pizza">Order a Pizza!</button>
        <div id="pizza-result"></div>
    </div>

    <script>
        document.getElementById('order-pizza').addEventListener('click', function() {
            // Show loading message
            const resultBox = document.getElementById('pizza-result');
            resultBox.style.display = 'block';
            resultBox.textContent = "Asking the chef to make your pizza... üë®‚Äçüç≥";
            
            // Simulate fetching data from an API
            setTimeout(function() {
                // This is where we would normally use fetch() to call a real API
                // Instead, we'll create a fake response
                const pizzaOrder = {
                    status: "success",
                    order: {
                        type: "pizza",
                        toppings: ["cheese", "pepperoni", "mushrooms"],
                        size: "large",
                        readyIn: "20 minutes",
                        price: 12.99
                    },
                    message: "Your pizza order has been received!"
                };
                
                // Format the JSON nicely
                const formattedJson = JSON.stringify(pizzaOrder, null, 2);
                resultBox.textContent = "Pizza ordered successfully! Here's what the chef sent back:\n\n" + formattedJson;
            }, 2000); // Wait 2 seconds to simulate network request
        });
    </script>
</body>
</html>
